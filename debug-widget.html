<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Widget Loading</title>
</head>
<body>
    <h1>Debug Widget Loading</h1>
    <div id="debug-log"></div>
    
    <script>
        function log(message) {
            const debugLog = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            debugLog.innerHTML += `[${timestamp}] ${message}<br>`;
            console.log(message);
        }
        
        log('Page loaded');
        log('Loading CSS...');
        
        // Load CSS
        const cssLink = document.createElement('link');
        cssLink.rel = 'stylesheet';
        cssLink.href = 'http://intalksai-call-ribbon-widget-844605843483.s3-website-us-east-1.amazonaws.com/static/css/main.77a39472.css';
        cssLink.onload = () => log('‚úÖ CSS loaded successfully');
        cssLink.onerror = () => log('‚ùå CSS failed to load');
        document.head.appendChild(cssLink);
        
        log('Loading JavaScript...');
        
        // Load JavaScript
        const jsScript = document.createElement('script');
        jsScript.src = 'http://intalksai-call-ribbon-widget-844605843483.s3-website-us-east-1.amazonaws.com/static/js/main.e0de6448.js';
        jsScript.onload = () => {
            log('‚úÖ JavaScript loaded successfully');
            
            // Check if ExotelCallRibbon is available
            setTimeout(() => {
                if (typeof window.ExotelCallRibbon !== 'undefined') {
                    log('‚úÖ ExotelCallRibbon is available');
                    log(`Version: ${window.ExotelCallRibbon.version}`);
                    
                    // Try to initialize
                    try {
                        window.ExotelCallRibbon.init({
                            apiKey: 'demo-api-key-789',
                            apiUrl: 'http://production.eba-tpbtmere.us-east-1.elasticbeanstalk.com',
                            position: 'bottom',
                            onReady: () => log('‚úÖ Widget initialized successfully'),
                            onCallEvent: (event, data) => log(`üìû Call event: ${event}`)
                        });
                    } catch (error) {
                        log(`‚ùå Initialization failed: ${error.message}`);
                    }
                } else {
                    log('‚ùå ExotelCallRibbon is not defined');
                    log('Available window properties: ' + Object.keys(window).filter(k => k.includes('Call') || k.includes('Ribbon')).join(', '));
                }
            }, 1000);
        };
        jsScript.onerror = () => log('‚ùå JavaScript failed to load');
        document.head.appendChild(jsScript);
    </script>
</body>
</html>
